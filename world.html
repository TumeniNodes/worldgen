<!doctype html>
<html>
  <head>
    <title>Perlin lua world viewer</title>
  </head>
  <body>
    <canvas id='world'></canvas>

    <script src='./world.js'></script>
    <script>
      !function(){
        'use strict';

        var heightmap = window.heightmap;
        var zoomLevel = 1;
        var max = 16;
        var squareSize = zoomLevel;

        var canvas = document.getElementById('world');
        canvas.height = heightmap.length * zoomLevel;
        canvas.width = heightmap[0].length * zoomLevel;

        var ctx = canvas.getContext('2d');
        var color;

        heightmap.forEach(function(row, y){
          row.forEach(function(height, x){
            color = Math.ceil(((max - height) / max) * 255);
            ctx.fillStyle = "rgb(" + color + "," + color + "," + color + ")";
            ctx.fillRect(squareSize * x, squareSize * y, squareSize, squareSize);
          });
        });

      }();
    </script>
  </body>
</html>
